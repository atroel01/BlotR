# BlotR

Rapidly extract band-intensities from Line immunoblots EuroImmun EuroLine Blot 

# Purpose

This Shiny App is designed to allow you to rapidly extract the band-intensities from EuroImmun Blot results
EuroLine LIA results must be generated from EuroImmun (R) scanner software and saved in single page view (one result per pdf), showing the scanned version of the band. 
- An example of the appearance of the blot below:

<img width="982" alt="image" src="https://user-images.githubusercontent.com/98567746/201501192-82127eae-c3a3-448a-9587-407c40ee9029.png">

Currently the app will extract details: 
- Generic: Patient Name, DOB, Lab Number, Created On, Date of Incubation, Patient ID
- Specific blots 
  - Myositis 16 Ag LIA - Scleroderma (Nucleoli) profile
  - ENA profile 3 plus DFS 
  - ENA Profile 5
  - Liver Blot
  - Neuronal Blot 12 Ag 
  
# Requirements

Requires R (https://www.r-project.org/)
RStudio (now called Posit) is recommended for simpler interfacing and editing of script (https://posit.co/).
App can be executed through command line
- once R installed open a terminal or command line at app.R file path 
- Enter command `Rscript app.R` and visit the url generated (an example below)

<img width="296" alt="image" src="https://user-images.githubusercontent.com/98567746/201500764-02e4ff8c-6539-4cd8-b7c8-c1747bb9a018.png">

Initial run of application will require download of required dependencies

# Usage

Select all of the blots at once that you wish to parse using the browser - any re-selection will replace all existing files selected. 
Please note as the app must copy the files to its directory there will be some time delay when there are many files to register them all. 

# Scanner detection

Flatbed and EuroBlotOne scanner results have differing cut-offs. If you have a variety of scanners in use then distinguishing these results maybe important. For example, in contrast to the previous scan which was generated by the EuroBlotOne, the flatbed scanner outputs results on a green paper background. 

<img width="959" alt="image" src="https://user-images.githubusercontent.com/98567746/201501250-446f3525-a542-4ed1-9e32-4487389694ec.png">

If you wish to use the scanner detection functionality then you must tick the box before hitting run. 
Detecting the color of the strip in the PDF is time consuming and will add substantial time to the parsing function. This will determine whether the strip was read by the EuroBlotOne e.g. strip scan is black and white; or green e.g. flatbed scanner. 

Bug: Sometimes changing tabs (Summary of Tests/Summary Graph/Repeated) is required to initiate parsing. 

You can enter names of results you wish to filter out or highlight as qc values in lower case (comma seperated e.g. qc, eib, qap,...)

# Output

Once the blots have been parsed the app will have outputs of
- Table of the number of positives and their overall intensity 
- Graph of all results (output graph when large data takes a while to generate - this is in plotly format)
- Repeated results, intensities and changes where name and DOB match (incorrect entry of these results will make it miss repeated values).
- A spreadsheet with one blot result per row and the intensities will be available for download from the download button.
